<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>我的网站收藏 | 极致体验</title>
  <meta name="description" content="纯前端网站收藏：IndexedDB 存储，搜索、分页、导出 Excel，移动端与桌面端自适应。" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./styles.css" />
  <!-- SheetJS for Excel export -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js" defer></script>
  <script src="./app.js" defer></script>
</head>
<body>
  <div class="app-shell">
    <header class="app-header container">
      <div class="brand">
        <div class="brand-mark" aria-hidden="true"></div>
        <div class="brand-text">
          <h1 class="title">我的收藏</h1>
          <p class="subtitle">快速 · 优雅 · 安全</p>
        </div>
      </div>
      <div class="actions">
        <div class="search-group">
          <input id="searchInput" class="input" type="search" placeholder="搜索：网址 / 名称 / 标签" aria-label="搜索收藏" />
          <button id="searchBtn" class="btn primary" aria-label="执行搜索">
            <span class="btn-icon" aria-hidden="true">🔎</span>
            <span class="btn-text">搜索</span>
          </button>
        </div>
        <div class="toolbar">
          <button id="addBtn" class="btn accent">
            <span class="btn-icon" aria-hidden="true">＋</span>
            <span class="btn-text">添加网址</span>
          </button>
          <button id="exportBtn" class="btn">
            <span class="btn-icon" aria-hidden="true">⬇</span>
            <span class="btn-text">导出网址</span>
          </button>
        </div>
      </div>
    </header>

    <main class="container">
      <section id="emptyState" class="empty hidden" aria-live="polite">
        <div class="empty-illustration" aria-hidden="true"></div>
        <h2>还没有收藏</h2>
        <p>点击“添加网址”开始收集你的灵感与效率工具。</p>
        <button id="emptyAddBtn" class="btn accent">添加第一个网址</button>
      </section>

      <section id="listSection" class="list-section">
        <div id="listGrid" class="grid" role="list"></div>
        <nav id="pagination" class="pagination" aria-label="分页"></nav>
      </section>
    </main>

    <footer class="app-footer container">
      <div>本地存储 · IndexedDB · 隐私友好</div>
      <div>© <span id="year"></span> 我的收藏</div>
    </footer>
  </div>

  <!-- Add/Edit Modal -->
  <div id="modalAddEdit" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="modalAddEditTitle">
    <div class="modal-backdrop" data-close="modal"></div>
    <div class="modal-card" role="document">
      <header class="modal-header">
        <h3 id="modalAddEditTitle">添加网址</h3>
        <button class="icon-btn" data-close="modal" aria-label="关闭">✕</button>
      </header>
      <form id="addEditForm" class="modal-body" novalidate>
        <input type="hidden" id="f_id" />
        <div class="field" id="idField" hidden>
          <label for="f_id_display">ID</label>
          <input id="f_id_display" class="input" type="text" readonly />
          <small class="hint">自动生成，不可修改</small>
        </div>
        <div class="field">
          <label for="f_url">网址</label>
          <input id="f_url" class="input" type="url" placeholder="例如：https://example.com" required />
          <small class="hint">请输入以 http:// 或 https:// 开头的网址</small>
        </div>
        <div class="field">
          <label for="f_name">网站名称</label>
          <input id="f_name" class="input" type="text" placeholder="网站名称" required />
        </div>
        <div class="field">
          <label for="f_tags">分类标签</label>
          <input id="f_tags" class="input" type="text" placeholder="用逗号分隔多个标签，如：工具, 编程" />
        </div>
        <div class="field" id="createdAtField" hidden>
          <label for="f_createdAt">添加日期</label>
          <input id="f_createdAt" class="input" type="text" placeholder="YYYY-MM-DD HH:mm" />
        </div>
        <div class="modal-footer">
          <button type="button" class="btn" data-close="modal">取消</button>
          <button type="submit" class="btn primary">保存</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Delete Confirm Modal -->
  <div id="modalConfirm" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="modalConfirmTitle">
    <div class="modal-backdrop" data-close="modal"></div>
    <div class="modal-card" role="document">
      <header class="modal-header">
        <h3 id="modalConfirmTitle">确认删除</h3>
        <button class="icon-btn" data-close="modal" aria-label="关闭">✕</button>
      </header>
      <div class="modal-body">
        <p>删除后不可恢复，确定要删除这条记录吗？</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn" data-close="modal">取消</button>
        <button id="confirmDeleteBtn" type="button" class="btn danger">确认删除</button>
      </div>
    </div>
  </div>
</body>
</html>
